<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="DSM Project — Security & Industrial Cleaning Quotation Model (Tangier Free Zone, Morocco)" />
  <title>DSM Project | Quotation Model — Tangier Free Zone</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="header">
    <div class="header-inner">
      <div class="brand">
        <img class="logo" src="assets/logo.png" alt="Design Studio Morocco Logo">
        <div class="brand-text">
          <div class="brand-title">DESIGN STUDIO MOROCCO</div>
          <div class="brand-subtitle">Professional Quotation Builder — Security & Industrial Cleaning (Tangier Free Zone)</div>
        </div>
      </div>

      <nav class="nav">
        <a href="#model">Quotation Model</a>
        <a href="#sources">Price Benchmark</a>
        <a href="#evidence">Regulatory References</a>
      </nav>
    </div>
  </header>

  <main class="container" id="model">
    <section class="hero">
      <div class="hero-content">
        <h1>Security & Industrial Cleaning — Cost Model (NET – TVA Exempt)</h1>
        <p>
          Reference case: <strong>5,000 m² industrial facility</strong> + <strong>24 sanitary units</strong>.
          Outputs are presented as <strong>NET (TVA Exempt – Tangier Free Zone)</strong>.
        </p>

        <div class="hero-badges">
          <span class="badge">Auto-hours from sliders</span>
          <span class="badge">Overtime check (+25%)</span>
          <span class="badge">One-time CAPEX equipment</span>
          <span class="badge">Direct market links (Jumia)</span>
        </div>
      </div>

      <div class="hero-side">
        <div class="kpi">
          <div class="kpi-label">Recurring Total / Month (NET – TVA Exempt)</div>
          <div class="kpi-value" id="kpiMonthly">—</div>
          <div class="kpi-foot">Operating cost excluding one-time CAPEX purchases</div>
        </div>
        <div class="kpi">
          <div class="kpi-label">First Month Total (NET – TVA Exempt)</div>
          <div class="kpi-value" id="kpiFirstMonth">—</div>
          <div class="kpi-foot">Recurring month + one-time CAPEX (PPE + equipment)</div>
        </div>
      </div>
    </section>

    <section class="layout">
      <!-- LEFT: INPUTS -->
      <section class="panel">
        <div class="panel-title">
          <h2>Quotation Inputs</h2>
          <p>Adjust parameters to match your staffing plan, legal updates, and procurement assumptions.</p>
        </div>

        <div class="card">
          <h3>1) Payroll Rates — Morocco (Employee vs Employer)</h3>

          <div class="grid">
            <label>
              Gross hourly wage (SMIG) — MAD/h
              <input id="smig" type="number" step="0.01" value="17.92">
              <small class="hint">Update to the applicable SMIG hourly at contract start date.</small>
            </label>

            <label>
              Employee deductions (%) — CNSS + AMO
              <input id="empDedRate" type="number" step="0.01" value="6.74">
              <small class="hint">Paid by staff: CNSS 4.48% + AMO 2.26% = 6.74%</small>
            </label>

            <label>
              Employer contributions (%) — Patronal (Company)
              <input id="employerRate" type="number" step="0.01" value="21.09">
              <small class="hint">Paid by the company (patronal) — update from CNSS official table.</small>
            </label>

            <label>
              Replacement coefficient (%) (leave/holidays/absences)
              <input id="replacement" type="number" step="0.01" value="8.50">
              <small class="hint">Continuity factor for replacements and absences.</small>
            </label>

            <label>
              Legal standard hours / agent / month
              <input id="legalMonthlyHours" type="number" step="1" value="191">
              <small class="hint">Benchmark for capacity check (adjust if your policy differs).</small>
            </label>

            <label>
              Overtime premium (%)
              <input id="otPremium" type="number" step="0.01" value="25">
              <small class="hint">Moroccan overtime premium applied here: +25%.</small>
            </label>
          </div>

          <div class="mini-metrics">
            <div class="metric">
              <div class="metric-label">Gross hourly (MAD)</div>
              <div class="metric-value" id="grossHourly">—</div>
            </div>
            <div class="metric">
              <div class="metric-label">Employee deductions (MAD/h)</div>
              <div class="metric-value" id="empDedHourly">—</div>
            </div>
            <div class="metric">
              <div class="metric-label">Net hourly (MAD/h)</div>
              <div class="metric-value" id="netHourly">—</div>
            </div>
            <div class="metric">
              <div class="metric-label">Employer cost (MAD/h)</div>
              <div class="metric-value" id="employerHourly">—</div>
            </div>
            <div class="metric">
              <div class="metric-label">Chargeable hourly (MAD/h)</div>
              <div class="metric-value accent" id="chargeableHourly">—</div>
            </div>
            <div class="metric">
              <div class="metric-label">Overtime hourly (MAD/h)</div>
              <div class="metric-value accent" id="otHourly">—</div>
            </div>
          </div>

          <div class="note">
            <strong>Tax note:</strong> This model is displayed as <strong>NET (TVA Exempt – Tangier Free Zone)</strong>.
            Confirm eligibility and invoicing mentions with your finance/tax requirements.
          </div>
        </div>

        <div class="card">
          <h3>2) Coverage, Staffing & Auto-Hours (Sliders)</h3>

          <div class="grid">
            <div class="rangebox">
              <div class="rangetop">
                <div>
                  <div class="rangetitle">Security coverage — 24/7 posts</div>
                  <div class="rangehint">Required hours are calculated automatically: posts × 24 × days/month</div>
                </div>
                <div class="pill"><span id="secPostsVal">2</span> posts</div>
              </div>
              <input id="secPosts" type="range" min="1" max="6" step="1" value="2">
              <div class="rangefoot">
                <span>Required security hours / month:</span>
                <strong id="secReqHours">—</strong>
              </div>
            </div>

            <div class="rangebox">
              <div class="rangetop">
                <div>
                  <div class="rangetitle">Security staffing — number of agents</div>
                  <div class="rangehint">Capacity check vs required hours (overtime if shortage).</div>
                </div>
                <div class="pill"><span id="secAgentsVal">8</span> agents</div>
              </div>
              <input id="secAgents" type="range" min="1" max="30" step="1" value="8">
              <div class="rangefoot">
                <span>Overtime hours (Security):</span>
                <strong id="secOtHours">—</strong>
              </div>
            </div>

            <label>
              Days per month (for 24/7 calculation)
              <input id="daysInMonth" type="number" step="0.01" value="30.33">
              <small class="hint">30.33 is an average month. You can set 30 or 31.</small>
            </label>

            <div class="rangebox">
              <div class="rangetop">
                <div>
                  <div class="rangetitle">Cleaning staffing — number of agents</div>
                  <div class="rangehint">Cleaning required hours: agents × hours/day × days/month</div>
                </div>
                <div class="pill"><span id="clnAgentsVal">6</span> agents</div>
              </div>
              <input id="clnAgents" type="range" min="1" max="30" step="1" value="6">
              <div class="rangefoot">
                <span>Required cleaning hours / month:</span>
                <strong id="clnReqHours">—</strong>
              </div>
            </div>

            <label>
              Cleaning hours per agent / day
              <input id="clnHoursPerDay" type="number" step="0.5" value="8">
              <small class="hint">Example: 8 hours/day.</small>
            </label>

            <label>
              Cleaning working days / month
              <input id="clnDaysPerMonth" type="number" step="1" value="22">
              <small class="hint">Example: 22 (Mon–Fri standard). Adjust if Saturdays are included.</small>
            </label>
          </div>

          <div class="note" id="otNote">
            Overtime check: when required hours exceed agents’ legal capacity, overtime is applied at <strong>+25%</strong>.
          </div>
        </div>

        <div class="card">
          <h3>3) One-time CAPEX (Purchased Once) & Recurring Consumables</h3>

          <div class="grid">
            <label>
              Security PPE CAPEX (one time) — MAD
              <input id="secPpeCapex" type="number" step="1" value="6090">
            </label>

            <label>
              Cleaning PPE CAPEX (one time) — MAD
              <input id="clnPpeCapex" type="number" step="1" value="3600">
            </label>

            <label>
              Cleaning equipment CAPEX (one time) — MAD
              <input id="equipCapex" type="number" step="1" value="29000">
            </label>

            <label>
              Cleaning products & consumables — MAD/month
              <input id="clnProducts" type="number" step="1" value="3040">
            </label>

            <label>
              Other recurring fixed cost — MAD/month (optional)
              <input id="otherFixed" type="number" step="1" value="0">
            </label>

            <label class="toggle">
              Include CAPEX in “First Month” total
              <input id="includeCapex" type="checkbox" checked>
              <span class="toggle-ui" aria-hidden="true"></span>
            </label>
          </div>
        </div>

        <div class="card">
          <h3>Export / Internal Approval</h3>
          <div class="actions">
            <button id="printBtn">Print / Save PDF</button>
            <button class="ghost" id="resetBtn">Reset to default</button>
          </div>
          <p class="hint">Printing generates a clean PDF suitable for internal validation or client submission.</p>
        </div>
      </section>

      <!-- RIGHT: SUMMARY -->
      <aside class="summary panel" id="summary">
        <div class="panel-title">
          <h2>Commercial Summary (NET – TVA Exempt)</h2>
          <p>Monthly recurring totals + overtime + one-time CAPEX view.</p>
        </div>

        <div class="card">
          <h3>Monthly Financial Summary (NET)</h3>

          <div class="summary-grid">
            <div class="summary-box">
              <div class="summary-label">Security (monthly)</div>
              <div class="summary-value" id="secTotal">—</div>
              <div class="summary-sub" id="secLaborText">Labor: —</div>
              <div class="summary-sub" id="secOtText">Overtime: —</div>
            </div>

            <div class="summary-box">
              <div class="summary-label">Cleaning (monthly)</div>
              <div class="summary-value" id="clnTotal">—</div>
              <div class="summary-sub" id="clnLaborText">Labor: —</div>
              <div class="summary-sub" id="clnOtText">Overtime: —</div>
            </div>

            <div class="summary-box">
              <div class="summary-label">Consumables / Other (monthly)</div>
              <div class="summary-value" id="otherRecurring">—</div>
              <div class="summary-sub">Consumables + other recurring fixed costs</div>
            </div>

            <div class="summary-box accent-box">
              <div class="summary-label">Recurring Total / Month (NET)</div>
              <div class="summary-value" id="grandTotal">—</div>
              <div class="summary-sub" id="annualText">Annual: —</div>
            </div>
          </div>

          <div class="split">
            <div class="donut-wrap">
              <div class="donut" id="donut" aria-label="Cost breakdown chart"></div>
              <div class="donut-legend">
                <div class="leg"><span class="dot s1"></span>Security</div>
                <div class="leg"><span class="dot s2"></span>Cleaning</div>
                <div class="leg"><span class="dot s3"></span>Consumables/Other</div>
              </div>
            </div>

            <div class="capex-box">
              <h4>One-time CAPEX (Purchased Once)</h4>
              <div class="capex-line"><span>Security PPE</span><strong id="capexSec">—</strong></div>
              <div class="capex-line"><span>Cleaning PPE</span><strong id="capexCln">—</strong></div>
              <div class="capex-line"><span>Cleaning equipment</span><strong id="capexEq">—</strong></div>
              <div class="capex-line total"><span>Total CAPEX</span><strong id="capexTotal">—</strong></div>

              <div class="capex-first">
                <div class="capex-first-label">First Month Total (NET)</div>
                <div class="capex-first-value" id="firstMonthTotal">—</div>
                <div class="capex-first-sub">Incl. CAPEX: <span id="capexIncludedText">Yes</span></div>
              </div>
            </div>
          </div>

          <table class="table">
            <thead>
              <tr>
                <th>Cost line</th>
                <th class="num">Monthly (MAD)</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>Security labor (normal)</td><td class="num" id="secLaborNormal">—</td></tr>
              <tr><td>Security labor (overtime +25%)</td><td class="num" id="secLaborOt">—</td></tr>
              <tr><td>Cleaning labor (normal)</td><td class="num" id="clnLaborNormal">—</td></tr>
              <tr><td>Cleaning labor (overtime +25%)</td><td class="num" id="clnLaborOt">—</td></tr>
              <tr><td>Cleaning consumables</td><td class="num" id="consumables">—</td></tr>
              <tr><td>Other recurring fixed cost</td><td class="num" id="otherFixedOut">—</td></tr>
            </tbody>
          </table>
        </div>
      </aside>
    </section>

    <section class="wide card" id="sources">
      <h2>Market Price Benchmark (Direct Links — Jumia Morocco)</h2>
      <p class="muted">
        Direct search links to real listings. For procurement evidence, select the exact item and archive the product page/proforma.
      </p>

      <div class="sources">
        <a class="source" target="_blank" rel="noreferrer" href="https://www.jumia.ma/catalog/?q=chariot+de+menage+professionnel">
          <span class="src-title">Industrial trolley (chariot de ménage)</span>
          <span class="src-url">https://www.jumia.ma/catalog/?q=chariot+de+menage+professionnel</span>
        </a>
        <a class="source" target="_blank" rel="noreferrer" href="https://www.jumia.ma/catalog/?q=aspirateur+professionnel">
          <span class="src-title">Professional vacuum (aspirateur professionnel)</span>
          <span class="src-url">https://www.jumia.ma/catalog/?q=aspirateur+professionnel</span>
        </a>
        <a class="source" target="_blank" rel="noreferrer" href="https://www.jumia.ma/catalog/?q=autolaveuse">
          <span class="src-title">Scrubber dryer (autolaveuse)</span>
          <span class="src-url">https://www.jumia.ma/catalog/?q=autolaveuse</span>
        </a>
        <a class="source" target="_blank" rel="noreferrer" href="https://www.jumia.ma/catalog/?q=chaussures+de+securite">
          <span class="src-title">Safety shoes (chaussures de sécurité)</span>
          <span class="src-url">https://www.jumia.ma/catalog/?q=chaussures+de+securite</span>
        </a>
        <a class="source" target="_blank" rel="noreferrer" href="https://www.jumia.ma/catalog/?q=vetement+de+travail">
          <span class="src-title">Workwear / Uniforms (vêtement de travail)</span>
          <span class="src-url">https://www.jumia.ma/catalog/?q=vetement+de+travail</span>
        </a>
        <a class="source" target="_blank" rel="noreferrer" href="https://www.jumia.ma/catalog/?q=sacs+poubelle">
          <span class="src-title">Trash bags / consumables (sacs poubelle)</span>
          <span class="src-url">https://www.jumia.ma/catalog/?q=sacs+poubelle</span>
        </a>
      </div>
    </section>

    <section class="wide card" id="evidence">
      <h2>Regulatory References (Official Websites)</h2>
      <ul class="evidence">
        <li><strong>Bulletin Officiel (BO):</strong> <a target="_blank" rel="noreferrer" href="https://www.sgg.gov.ma/BO/">https://www.sgg.gov.ma/BO/</a></li>
        <li><strong>CNSS:</strong> <a target="_blank" rel="noreferrer" href="https://www.cnss.ma/">https://www.cnss.ma/</a></li>
        <li><strong>ANAM (AMO):</strong> <a target="_blank" rel="noreferrer" href="https://www.anam.ma/">https://www.anam.ma/</a></li>
        <li><strong>Ministry portal:</strong> <a target="_blank" rel="noreferrer" href="https://www.miepeec.gov.ma/">https://www.miepeec.gov.ma/</a></li>
      </ul>
    </section>

    <footer class="footer">
      <small>© DSM Project — Quotation Model (Tangier Free Zone). Version 3.0</small>
    </footer>
  </main>

  <script src="app.js"></script>
</body>
</html>
